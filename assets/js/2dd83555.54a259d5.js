"use strict";(self.webpackChunkogma=self.webpackChunkogma||[]).push([[94],{8729:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var o=n(3236);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,f=u["".concat(l,".").concat(d)]||u[d]||m[d]||a;return n?o.createElement(f,i(i({ref:t},c),{},{components:n})):o.createElement(f,i({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7073:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>s,contentTitle:()=>l,metadata:()=>p,toc:()=>c,default:()=>u});var o=n(2245),r=n(5903),a=(n(3236),n(8729)),i=["components"],s={id:"socket.io",title:"Platform Socket.IO"},l="@ogma/platform-socket.io",p={unversionedId:"nestjs/ws/socket.io",id:"nestjs/ws/socket.io",isDocsHomePage:!1,title:"Platform Socket.IO",description:"The SocketIOParser parser for the OgmaInterceptor. This plugin class parses TCP request and response object to be able to successfully log the data about the request. For more information, check out the @ogma/nestjs-module documentation.",source:"@site/docs/nestjs/ws/socket.io.md",sourceDirName:"nestjs/ws",slug:"/nestjs/ws/socket.io",permalink:"/docs/nestjs/ws/socket.io",editUrl:"https://github.com/jmcdo29/ogma/edit/main/apps/docs/docs/nestjs/ws/socket.io.md",tags:[],version:"current",lastUpdatedBy:"Jay McDoniel",lastUpdatedAt:1665685620,formattedLastUpdatedAt:"10/13/2022",frontMatter:{id:"socket.io",title:"Platform Socket.IO"},sidebar:"mySidebar",previous:{title:"Websocket Overview",permalink:"/docs/nestjs/ws/overview"},next:{title:"Platform WS",permalink:"/docs/nestjs/ws/ws"}},c=[{value:"Installation",id:"installation",children:[],level:2},{value:"Usage",id:"usage",children:[{value:"Note",id:"note",children:[],level:3}],level:2}],m={toc:c};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"ogmaplatform-socketio"},"@ogma/platform-socket.io"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"SocketIOParser")," parser for the ",(0,a.kt)("inlineCode",{parentName:"p"},"OgmaInterceptor"),". This plugin class parses TCP request and response object to be able to successfully log the data about the request. For more information, check out the ",(0,a.kt)("a",{parentName:"p",href:"../module"},"@ogma/nestjs-module")," documentation."),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("p",null,"Nothing special, standard ",(0,a.kt)("inlineCode",{parentName:"p"},"npm i @ogma/platform-socket.io")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"yarn add @ogma/platform-socket.io")),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("p",null,"This plugin is to be used in the ",(0,a.kt)("inlineCode",{parentName:"p"},"OgmaInterceptorOptions")," portion of the ",(0,a.kt)("inlineCode",{parentName:"p"},"OgmaModule")," during ",(0,a.kt)("inlineCode",{parentName:"p"},"forRoot")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"forRootAsync")," registration. It can be used like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"@Module(\n  OgmaModule.forRoot({\n    interceptor: {\n      ws: SocketIOParser\n    }\n  })\n)\nexport class AppModule {}\n")),(0,a.kt)("h3",{id:"note"},"Note"),(0,a.kt)("p",null,"As the Gateway/Websocket context runs in parallel with the HTTP Context, and as the application configuration is not shared between the two, to bind the ",(0,a.kt)("inlineCode",{parentName:"p"},"OgmaInterceptor")," to the GateWay, you ",(0,a.kt)("strong",{parentName:"p"},"must")," use ",(0,a.kt)("inlineCode",{parentName:"p"},"@UseInterceptor(OgmaInterceptor)")," ",(0,a.kt)("strong",{parentName:"p"},"and")," have ",(0,a.kt)("inlineCode",{parentName:"p"},"OgmaModule.forFeature()")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"imports")," array of the same module."),(0,a.kt)("p",null,"The method for the ",(0,a.kt)("inlineCode",{parentName:"p"},"SocketIOParser")," is always ",(0,a.kt)("inlineCode",{parentName:"p"},"socket.io")," and the ",(0,a.kt)("inlineCode",{parentName:"p"},"protocol")," is always ",(0,a.kt)("inlineCode",{parentName:"p"},"WS"),". Until a better method at determining these values is found, this will be a static value."))}u.isMDXComponent=!0}}]);